# Link-Cut Tree 

## 实链剖分

对于树上的一个结点，从它向儿子的所有边里面选一条边作为实边，其他边作为虚边。

性质：
1. 树中每个点一定被唯一一条实链包含。
2. 一条实链中的每一个点的深度一定不相同。

在 LCT 中，用一个 Splay 维护一条实链中的点，按照深度从小到大排序。

## 与 （文艺）Splay 不同的地方

LCT 中无论何时，Splay tree[pos] 都代表图中的 pos 点。而 Splay 中一条链上第 k 个位置是什么要通过基于 size 的 find 找到。LCT 中唯一会打乱次序的翻转操作可以被视为树上换根，所以 pos 不变。

## Access 操作

`access(x)` 把从根到 $x$ 的所有点放在一条实链里，使根到 $x$ 成为一条实路径，并且在同一棵 Splay 里。

大致流程：
1. 从包含 $x$ 的 Splay 开始，删掉深度大于 $x$ 的结点。
2. 找到包含 $x$ 的 Splay 的父亲 $fa$, 把包含 $fa$ 的 Splay 中深度大于 $fa$ 的结点删掉。
3. 合并包含 $x$ 的 Splay 和包含 $fa$ 的 Splay。

技巧：因为虚边认父不认子，所以从 Splay 的中把实边变成虚边只需要从对应的父亲中删掉儿子即可。


